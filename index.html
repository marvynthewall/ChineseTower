<html>
<head>
   <meta charset = "UTF-8" name="description" content="Computer Graphics HW6-First try of WebGL">
   <script src="./twgl.js/dist/twgl-full.min.js"></script>
   <script id="vs" type="not-js">
      attribute vec3 vPosition;
      //attribute vec3 vNormal;
      attribute vec3 vColor;
      varying vec3 fColor;
      uniform mat4 modelViewMatrix;
      uniform mat4 normalMatrix;
      uniform mat4 projectionMatrix;
      varying vec3 fNormal;
      void main(void) {
         //fNormal = normalize( ( normalMatrix * vec4(vNormal, 0.0) ).xyz );
         vec4 hhh= modelViewMatrix *  vec4(vPosition, 1.0) ;
         gl_Position = projectionMatrix * hhh;
         fColor = vColor;
      }
   </script>

   <script id="fs" type="not-js">
      precision highp float;
      varying vec3 fColor;
      varying vec3 fNormal;
      void main(void) {
         //float vv = max(0.0, dot(fNormal, vec3(1.0, 1.0, 1.0)));
         gl_FragColor = 1.0 * vec4(fColor,1.0) ;
      }
   </script>
   <script id="vsi" type="non-js">
      precision highp float;
      attribute vec3 vPos;
      uniform mat4 modelViewMatrix;
      void main(void){
         vec4 pp = modelViewMatrix * vec4(vPos, 1.0);
         gl_Position = pp;
      }
   </script>
   <script id="fsi" type="non-js">
      precision highp float;
      void main(void){
         gl_FragColor = vec4(0.0, 1.0, 1.0, 1.0);
      }
   </script>
   <script id="vso" type="non-js">
      precision highp float;
      attribute vec3 vPos;
      attribute vec3 vNormal;
      attribute vec3 vColor;
      uniform mat4 modelViewMatrix;
      uniform mat4 normalMatrix;
      uniform mat4 projectionMatrix;
      varying vec3 fPosition;
      varying vec3 fNormal;
      varying vec3 uPos;
      varying vec3 fColor;
      void main(void){
         fNormal = normalize(mat3(normalMatrix) * vNormal);
         vec4 pos = modelViewMatrix * vec4(vPos, 1.0);
         fPosition = pos.xyz;
         uPos = vPos.xyz;
         fColor = vColor;
         gl_Position = projectionMatrix * pos;
      }
   </script>
   <script id="fso" type="non-js">
      precision highp float;
      varying vec3 fPosition;
      varying vec3 fNormal;
      varying vec3 uPos;
      varying vec3 fColor;
      void main(void){
         float vv = max(0.0, dot(fNormal, vec3(1.0, 1.0, 1.0)));
         gl_FragColor = 0.5 * vec4(fColor,1.0) + 0.5 * vec4(0.0, vv, vv, 1.0);
      }
   </script>
   <script src="util.js"></script>
   <script src="tower.js"></script>
   <script src="main.js"></script>
</head>
<body>
   <canvas id="mycanvas" height="800" width="800">
</body>
</html>
